{
  "comments": [
    {
      "key": {
        "uuid": "3f397855_d66f7ccc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1336554
      },
      "writtenOn": "2019-07-17T15:27:11Z",
      "side": 1,
      "message": "how long does it take without your changes?",
      "range": {
        "startLine": 11,
        "startChar": 22,
        "endLine": 11,
        "endChar": 33
      },
      "revId": "6f68bf8eee9fb52bd47d048d9d0d4b64363ee8e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db9fba19_f20a9d29",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2423,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2019-07-18T07:51:27Z",
      "side": 1,
      "message": "I would do this first, and return an error if it fails. Otherwise, the wakelock we acquired on L2419 would never be released, keeping the CPU awake.",
      "range": {
        "startLine": 2423,
        "startChar": 8,
        "endLine": 2423,
        "endChar": 45
      },
      "revId": "6f68bf8eee9fb52bd47d048d9d0d4b64363ee8e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8851eb23_c6259794",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2423,
      "author": {
        "id": 1530043
      },
      "writtenOn": "2019-07-18T09:43:30Z",
      "side": 1,
      "message": "I could add it the beginning, but \n1. if wake_lock_releaser gets called before acquiring a wake lock then we may end up reporting a false fail.\n2. If atexit fails registering wake_lock_releaser, we error out, dumpstate process dies at this point and SystemSuspend will cleanup the wake lock.",
      "parentUuid": "db9fba19_f20a9d29",
      "range": {
        "startLine": 2423,
        "startChar": 8,
        "endLine": 2423,
        "endChar": 45
      },
      "revId": "6f68bf8eee9fb52bd47d048d9d0d4b64363ee8e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83a04864_c425549b",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2423,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2019-07-18T10:19:13Z",
      "side": 1,
      "message": "Oh - but if SystemSuspend anyway cleans up the wakelock for you when the process dies, why do you need the atexit() handler?",
      "parentUuid": "8851eb23_c6259794",
      "range": {
        "startLine": 2423,
        "startChar": 8,
        "endLine": 2423,
        "endChar": 45
      },
      "revId": "6f68bf8eee9fb52bd47d048d9d0d4b64363ee8e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b66bfea3_6a5f2d86",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 2
      },
      "lineNbr": 2423,
      "author": {
        "id": 1530043
      },
      "writtenOn": "2019-07-19T09:49:24Z",
      "side": 1,
      "message": "I am unsure where wake_lock_releaser should be called in dumpstate, I assume, calling it at exit of dumpstate makes it more reliable as dumpstate has multiple return points. If we don\u0027t have atexit handler, code will still work, but I thought this is cleaner way to release wake lock from dumpstate side, correct me if I am wrong here.",
      "parentUuid": "83a04864_c425549b",
      "range": {
        "startLine": 2423,
        "startChar": 8,
        "endLine": 2423,
        "endChar": 45
      },
      "revId": "6f68bf8eee9fb52bd47d048d9d0d4b64363ee8e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}