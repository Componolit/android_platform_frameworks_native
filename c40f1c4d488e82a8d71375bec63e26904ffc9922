{
  "comments": [
    {
      "key": {
        "uuid": "3968b810_4e0de7f5",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 144,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2018-12-04T13:29:00Z",
      "side": 1,
      "message": "btw re: O_NONBLOCK, it looks like this code doesn\u0027t handle EAGAIN (or EWOULDBLOCK). The read() is allowed to return EAGAIN with O_NONBLOCK, so it\u0027s worth thinking through what would happen if that is returned.",
      "range": {
        "startLine": 144,
        "startChar": 58,
        "endLine": 144,
        "endChar": 68
      },
      "revId": "c40f1c4d488e82a8d71375bec63e26904ffc9922",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06dba408_d5aa8367",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 144,
      "author": {
        "id": 1336554
      },
      "writtenOn": "2018-12-04T17:12:29Z",
      "side": 1,
      "message": "Source is a regular file here, for which looks like O_NONBLOCK is ignored (which was probably Narayan\u0027s point). I can remove it \u0026 avoid handling EAGAIN.",
      "parentUuid": "3968b810_4e0de7f5",
      "range": {
        "startLine": 144,
        "startChar": 58,
        "endLine": 144,
        "endChar": 68
      },
      "revId": "c40f1c4d488e82a8d71375bec63e26904ffc9922",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aa320106_7c203fa3",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 144,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2018-12-05T08:38:13Z",
      "side": 1,
      "message": "Ah I didn\u0027t know that, I looked for more info and read an interesting article about it here:\n\nhttps://lwn.net/Articles/612483/\n\nso it\u0027s probably ok to leave O_NONBLOCK as well, and even not handle EAGAIN, because apparently applications are already depending on this behavior and the kernel can\u0027t break them.",
      "parentUuid": "06dba408_d5aa8367",
      "range": {
        "startLine": 144,
        "startChar": 58,
        "endLine": 144,
        "endChar": 68
      },
      "revId": "c40f1c4d488e82a8d71375bec63e26904ffc9922",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8732472f_ddd8f620",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 144,
      "author": {
        "id": 1014443
      },
      "writtenOn": "2018-12-05T09:30:55Z",
      "side": 1,
      "message": "If it\u0027s a regular file, please remove O_NONBLOCK because it\u0027s misleading to readers -- it would suggest that you\u0027re reading from a pipe or similar.",
      "parentUuid": "aa320106_7c203fa3",
      "range": {
        "startLine": 144,
        "startChar": 58,
        "endLine": 144,
        "endChar": 68
      },
      "revId": "c40f1c4d488e82a8d71375bec63e26904ffc9922",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f737cf2e_310c2796",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 144,
      "author": {
        "id": 1336554
      },
      "writtenOn": "2018-12-05T09:38:16Z",
      "side": 1,
      "message": "It\u0027s removed, like I mentioned above. You are looking at an older patchset.",
      "parentUuid": "8732472f_ddd8f620",
      "range": {
        "startLine": 144,
        "startChar": 58,
        "endLine": 144,
        "endChar": 68
      },
      "revId": "c40f1c4d488e82a8d71375bec63e26904ffc9922",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "46384e4e_6d478104",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2018-12-04T13:25:53Z",
      "side": 1,
      "message": "how about having two functions:\nCopyFileToOutputFile(const std::string\u0026 input_file, const std::string\u0026 output_file);\nCopyFileToFd(const std::string\u0026 input_file, int fd);\n\nThe former can then call the latter to do the actual copy, and the caller of this function can call the correct one directly based on whether it has an fd or a string filename.",
      "range": {
        "startLine": 162,
        "startChar": 12,
        "endLine": 163,
        "endChar": 70
      },
      "revId": "c40f1c4d488e82a8d71375bec63e26904ffc9922",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc979e95_250c7096",
        "filename": "cmds/dumpstate/dumpstate.cpp",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 1336554
      },
      "writtenOn": "2018-12-04T17:12:29Z",
      "side": 1,
      "message": "nice!",
      "parentUuid": "46384e4e_6d478104",
      "range": {
        "startLine": 162,
        "startChar": 12,
        "endLine": 163,
        "endChar": 70
      },
      "revId": "c40f1c4d488e82a8d71375bec63e26904ffc9922",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9dc82236_aeac7ba1",
        "filename": "cmds/dumpstate/dumpstate.h",
        "patchSetId": 3
      },
      "lineNbr": 169,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2018-12-04T13:25:53Z",
      "side": 1,
      "message": "+1 for /bugreports",
      "range": {
        "startLine": 169,
        "startChar": 48,
        "endLine": 169,
        "endChar": 98
      },
      "revId": "c40f1c4d488e82a8d71375bec63e26904ffc9922",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ff3e5a4_62c0f1ce",
        "filename": "cmds/dumpstate/dumpstate.h",
        "patchSetId": 3
      },
      "lineNbr": 169,
      "author": {
        "id": 1336554
      },
      "writtenOn": "2018-12-04T17:12:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9dc82236_aeac7ba1",
      "range": {
        "startLine": 169,
        "startChar": 48,
        "endLine": 169,
        "endChar": 98
      },
      "revId": "c40f1c4d488e82a8d71375bec63e26904ffc9922",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}